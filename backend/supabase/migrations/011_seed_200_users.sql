-- Seed 200 users from all over the world
-- This script creates diverse test users with locations across the globe

-- Function to generate unique usernames
CREATE OR REPLACE FUNCTION generate_username(seed INT) RETURNS TEXT AS $$
DECLARE
    adjectives TEXT[] := ARRAY['Swift', 'Dark', 'Bright', 'Silent', 'Rapid', 'Fierce', 'Mystic', 'Wild', 'Bold', 'Stealth', 'Neon', 'Cyber', 'Shadow', 'Crystal', 'Thunder', 'Flame', 'Frost', 'Storm', 'Void', 'Light', 'Fast', 'Quick', 'Sharp', 'Cool', 'Hot', 'Cold', 'Warm', 'Fresh', 'New', 'Old', 'Red', 'Blue', 'Green', 'Black', 'White', 'Gold', 'Silver', 'Iron', 'Steel', 'Fire'];
    nouns TEXT[] := ARRAY['Virus', 'Strain', 'Host', 'Vector', 'Agent', 'Code', 'Node', 'Link', 'Core', 'Edge', 'Wave', 'Pulse', 'Signal', 'Beam', 'Stream', 'Flow', 'Rush', 'Surge', 'Burst', 'Flash', 'Spark', 'Blade', 'Fang', 'Claw', 'Wing', 'Tail', 'Eye', 'Mind', 'Soul', 'Heart', 'Star', 'Moon', 'Sun', 'Wind', 'Rain', 'Cloud', 'Storm', 'Light', 'Dark', 'Night'];
BEGIN
    RETURN adjectives[(seed % array_length(adjectives, 1)) + 1] || 
           nouns[((seed * 7) % array_length(nouns, 1)) + 1] || 
           LPAD((seed % 999)::TEXT, 3, '0');
END;
$$ LANGUAGE plpgsql;

-- Insert 200 users from major cities around the world (unique locations)
WITH city_data AS (
    SELECT * FROM (VALUES
    -- North America (40 cities)
    (40.7128, -74.0060), (34.0522, -118.2437), (41.8781, -87.6298), (29.7604, -95.3698), (33.4484, -112.0740),
    (39.9526, -75.1652), (32.7767, -96.7970), (25.7617, -80.1918), (37.7749, -122.4194), (47.6062, -122.3321),
    (45.5152, -122.6784), (39.7392, -104.9903), (30.2672, -97.7431), (42.3601, -71.0589), (38.9072, -77.0369),
    (43.6532, -79.3832), (45.5017, -73.5673), (49.2827, -123.1207), (19.4326, -99.1332), (20.6597, -103.3496),
    (27.9506, -82.4572), (30.3322, -81.6557), (35.2271, -80.8431), (39.2904, -76.6122), (42.3314, -83.0458),
    (39.7684, -86.1581), (36.1622, -86.7816), (33.7490, -84.3880), (38.2527, -85.7585), (36.1699, -115.1398),
    (36.7783, -119.4179), (38.5816, -121.4944), (32.7157, -117.1611), (33.9533, -117.3962), (33.6846, -117.8265),
    (37.3382, -121.8863), (47.2529, -122.4443), (40.7589, -111.8882), (35.0844, -106.6504), (29.4241, -98.4936),
    
    -- South America (15 cities)
    (-23.5505, -46.6333), (-22.9068, -43.1729), (-34.6037, -58.3816), (-33.4489, -70.6693), (4.7110, -74.0721),
    (-12.0464, -77.0428), (-0.1807, -78.4678), (10.4806, -66.9036), (-15.7942, -47.8822), (-25.2637, -57.5759),
    (-16.2902, -63.5887), (-8.8383, -13.2344), (-34.9011, -56.1645), (-25.2637, -57.5759), (-12.0464, -77.0428),
    
    -- Europe (50 cities)
    (51.5074, -0.1278), (48.8566, 2.3522), (52.5200, 13.4050), (41.9028, 12.4964), (40.4168, -3.7038),
    (52.3676, 4.9041), (50.8503, 4.3517), (55.7558, 37.6173), (59.3293, 18.0686), (59.9343, 10.7522),
    (55.6761, 12.5683), (60.1699, 24.9384), (53.3498, -6.2603), (41.3851, 2.1734), (38.7223, -9.1393),
    (45.4642, 9.1900), (50.0755, 14.4378), (47.4979, 19.0402), (52.2297, 21.0122), (44.4268, 26.1025),
    (41.0082, 28.9784), (37.9838, 23.7275), (45.8150, 15.9819), (55.9533, -3.1883), (53.4808, -2.2426),
    (51.4545, -2.5879), (53.8008, -1.5491), (52.4862, -1.8904), (50.8225, -0.1372), (51.4816, -3.1791),
    (55.8642, -4.2518), (64.1466, -21.9426), (50.0647, 19.9450), (54.3520, 18.6466), (56.9496, 24.1052),
    (54.6872, 25.2797), (50.4501, 30.5234), (44.7866, 20.4489), (47.4979, 19.0402), (41.3275, 19.8187),
    (42.6977, 23.3219), (44.4268, 26.1025), (47.0104, 28.8638), (46.9481, 7.4474), (47.3769, 8.5417),
    (48.2082, 16.3738), (45.4372, 12.3346), (43.8563, 18.4131), (45.8150, 15.9819), (46.0569, 14.5058),
    (45.8150, 15.9819), (44.7866, 20.4489),
    
    -- Asia (60 cities)
    (35.6762, 139.6503), (31.2304, 121.4737), (22.3193, 114.1694), (1.3521, 103.8198), (13.7563, 100.5018),
    (3.1390, 101.6869), (-6.2088, 106.8456), (14.5995, 120.9842), (10.8231, 106.6297), (37.5665, 126.9780),
    (39.9042, 116.4074), (23.1291, 113.2644), (28.6139, 77.2090), (19.0760, 72.8777), (12.9716, 77.5946),
    (22.5726, 88.3639), (13.0827, 80.2707), (24.8607, 67.0011), (31.5497, 74.3436), (33.6844, 73.0479),
    (23.8103, 90.4125), (6.9271, 79.8612), (27.7172, 85.3240), (25.2048, 55.2708), (24.7136, 46.6753),
    (21.5429, 39.1728), (31.7683, 35.2137), (33.8938, 35.5018), (29.3117, 47.4818), (25.2854, 51.5310),
    (26.0667, 50.5577), (23.4241, 53.8478), (35.6892, 51.3890), (33.3152, 44.3661), (25.276987, 55.296249),
    (22.1987, 113.5439), (22.3193, 114.1694), (25.0330, 121.5654), (24.1477, 120.6736), (35.0116, 135.7681),
    (34.6937, 135.5023), (35.1815, 136.9066), (43.0642, 141.3469), (26.2041, 127.6809), (35.6762, 139.6503),
    (12.9716, 77.5946), (18.5204, 73.8567), (17.3850, 78.4867), (19.0760, 72.8777), (22.5726, 88.3639),
    (13.0827, 80.2707), (28.7041, 77.1025), (26.4499, 80.3319), (23.0225, 72.5714), (30.7333, 76.7794),
    (19.2183, 72.9781), (12.2958, 76.6394), (9.9312, 76.2673), (11.0168, 76.9558), (10.7905, 78.7047),
    (8.5241, 76.9366), (17.3850, 78.4867), (19.2183, 72.9781), (23.0225, 72.5714), (26.4499, 80.3319),
    
    -- Middle East (15 cities)
    (25.2048, 55.2708), (24.7136, 46.6753), (21.5429, 39.1728), (31.7683, 35.2137), (33.8938, 35.5018),
    (29.3117, 47.4818), (25.2854, 51.5310), (26.0667, 50.5577), (23.4241, 53.8478), (35.6892, 51.3890),
    (33.3152, 44.3661), (24.4539, 54.3773), (25.2048, 55.2708), (24.7136, 46.6753), (21.5429, 39.1728),
    
    -- Africa (15 cities)
    (-26.2041, 28.0473), (-33.9249, 18.4241), (-1.2921, 36.8219), (6.5244, 3.3792), (30.0444, 31.2357),
    (9.0765, 7.3986), (-15.3875, 28.3228), (-1.9441, 30.0619), (0.3476, 32.5825), (-4.0435, 39.6682),
    (33.5731, -7.5898), (-25.7479, 28.2293), (-29.8587, 31.0218), (-33.9249, 18.4241), (-26.2041, 28.0473),
    
    -- Oceania (10 cities)
    (-33.8688, 151.2093), (-37.8136, 144.9631), (-27.4698, 153.0251), (-31.9505, 115.8605), (-34.9285, 138.6007),
    (-36.8485, 174.7633), (-41.2865, 174.7762), (-12.4634, 130.8456), (-16.9186, 145.7781), (-19.2590, 146.8169)
    ) AS t(lat, lng)
    LIMIT 200
)
INSERT INTO users (username, last_location, created_at, generation, tags_given, tags_received)
SELECT 
    generate_username((row_number() OVER ())::INT) as username,
    ST_SetSRID(ST_MakePoint(lng, lat), 4326)::GEOGRAPHY as last_location,
    NOW() - (random() * INTERVAL '365 days') as created_at,
    floor(random() * 5)::INT as generation,
    floor(random() * 50)::INT as tags_given,
    floor(random() * 30)::INT as tags_received
FROM city_data;

-- Clean up the function
DROP FUNCTION IF EXISTS generate_username(INT);
